{% extends '/administration/index.html' %}

{% block dashboard_title %}
  History Log
{% endblock %}

{%- block breadcrumbs %}
{{ super() }}
<i class="right angle icon divider"></i>
{% if url_for('administration.history_logs.index') == request.path %}
  <div class="active section">History Logs</div>
{% else %}
  History Logs Door Group: {{ door_group.name }}
{% endif %}
{%- endblock %}

{% block content %}
  <div class="ui container" style="margin-top: 1em;">
    {% if logs and logs | count > 0 %}
  <table class="ui selectable celled table">
    <thead>
      <tr>
        <th class="four wide">Date</th>
        <th>Message</th>
      </tr>
    </thead>

    <tbody>
      {% for log in logs %}
      <tr>
        <td>{{ log.recorded_date.ctime() }}</td>
        <td>
          {% if 'delete' in log.action %}
            <i class="window close red icon"></i>
          {% elif 'update' in log.action %}
            <i class="pen blue icon"></i>
          {% elif 'create' in log.action %}
            <i class="add green icon"></i>
          {% elif 'Web' in log.message %}
            <i class="laptop code blue icon"></i>
          {% elif 'RFID' in log.message %}
            <i class="credit card outline blue icon"></i>
          {% elif 'Passcode' in log.message %}
            <i class="th blue icon"></i>
          {% endif %}
          {{ log.message }}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
     <div class="ui info message">
        <div class="header">
          Don't have any Logs.
        </div>
      </div>
  {% endif %}
</div>
{% endblock %}
